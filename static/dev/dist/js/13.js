(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{482:
/*!*********************************************!*\
  !*** ./src/pages/task/TaskCreate/index.vue ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./index.vue?vue&type=template&id=2305fb60&scoped=true& */869),i=a(/*! ./index.vue?vue&type=script&lang=js& */678);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./index.vue?vue&type=style&index=0&id=2305fb60&lang=scss&scoped=true& */835);var r=a(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */2),o=Object(r.a)(i.default,n.a,n.b,!1,null,"2305fb60",null);o.options.__file="index.vue",t.default=o.exports},520:
/*!**************************************************************!*\
  !*** ./src/pages/task/TaskStep.vue?vue&type=script&lang=js& ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/vue-loader/lib??vue-loader-options!./TaskStep.vue?vue&type=script&lang=js& */521),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},521:
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskStep.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(/*! @/utils/i18n.js */14),t.default={name:"TaskCreateStep",props:["list","currentStep","allFinished"],data:function(){return{}},computed:{currentStepIndex:function(){return this.getCurrentStepIndex()}},methods:{getCurrentStepIndex:function(){var e=this,t=0;return this.list.some(function(a,n){if(a.step===e.currentStep)return t=n,!0}),t}}}},522:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskStep.vue?vue&type=style&index=0&id=67422e92&lang=scss&scoped=true& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},523:
/*!*******************************************************************!*\
  !*** ./src/pages/task/TaskParamEdit.vue?vue&type=script&lang=js& ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/vue-loader/lib??vue-loader-options!./TaskParamEdit.vue?vue&type=script&lang=js& */524),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},524:
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskParamEdit.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(/*! babel-runtime/regenerator */132)),i=f(a(/*! babel-runtime/helpers/slicedToArray */468)),s=f(a(/*! babel-runtime/core-js/get-iterator */136)),r=f(a(/*! babel-runtime/helpers/asyncToGenerator */133)),o=f(a(/*! babel-runtime/helpers/extends */131));a(/*! @/utils/i18n.js */14);var c=a(/*! vuex */42),u=f(a(/*! @/utils/atomFilter.js */534)),l=f(a(/*! @/utils/tools.js */196)),d=a(/*! @/utils/checkDataType.js */135),p=f(a(/*! @/components/common/RenderFormNew/RenderForm.vue */514));function f(e){return e&&e.__esModule?e:{default:e}}t.default={name:"TaskParamEdit",components:{RenderForm:p.default},props:["constants","editable"],data:function(){return{variables:l.default.deepClone(this.constants),renderOption:{showGroup:!0,showLabel:!0,showHook:!1,showDesc:!0,formEdit:this.editable},renderConfig:[],metaConfig:{},renderData:{},isConfigLoading:!0}},computed:(0,o.default)({},(0,c.mapState)({atomFormConfig:function(e){return e.atomForm.config}})),watch:{constants:function(e){this.variables=l.default.deepClone(e),this.getFormData()},editable:function(e){this.$set(this.renderOption,"editable",e)}},created:function(){this.getFormData()},methods:(0,o.default)({},(0,c.mapActions)("atomForm/",["loadAtomConfig"]),(0,c.mapMutations)("atomForm/",["setAtomConfig"]),{getFormData:function(){var t=this;return(0,r.default)(n.default.mark(function a(){var r,o,c,p,f,m,h,v,_,k,g,w,b,x,S,y,C,D,N;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(o in r=[],t.variables)"show"===(c=l.default.deepClone(t.variables[o])).show_type&&r.push(c);r=r.sort(function(e,t){return e.index-t.index}),p=!0,f=!1,m=void 0,a.prev=6,h=(0,s.default)(r);case 8:if(p=(v=h.next()).done){a.next=35;break}if(_=v.value,k=_.source_tag,g=_.key,!k){a.next=28;break}if(w=k.split("."),b=(0,i.default)(w,2),x=b[0],S=b[1],t.atomFormConfig[x]){a.next=19;break}return t.isConfigLoading=!0,a.next=18,t.loadAtomConfig({atomType:x});case 18:t.setAtomConfig({atomType:x,configData:e.atoms[x]});case 19:y=t.atomFormConfig[x],C=l.default.deepClone(u.default.formFilter(S,y)),(_.is_meta||C.meta_transform)&&(C=C.meta_transform(_.meta||_),t.metaConfig[g]=l.default.deepClone(_),_.meta||(_.value=C.attrs.value)),C.tag_code=g,C.attrs.name=_.name,C.attrs.desc=_.desc,t.renderConfig.push(C),a.next=31;break;case 28:D={tag_code:g,type:_.custom_type,variableKey:g,attrs:{name:_.name,hookable:!0}},"input"===_.custom_type&&_.validation&&"String"===(0,d.checkDataType)(_.validation)&&(N={type:"regex",args:_.validation,error_message:gettext("输入值不满足校验规则")+_.validation},D.attrs.desc=_.desc,D.attrs.validation=[N]),t.renderConfig.push(D);case 31:t.renderData[g]=l.default.deepClone(_.value);case 32:p=!0,a.next=8;break;case 35:a.next=41;break;case 37:a.prev=37,a.t0=a.catch(6),f=!0,m=a.t0;case 41:a.prev=41,a.prev=42,!p&&h.return&&h.return();case 44:if(a.prev=44,!f){a.next=47;break}throw m;case 47:return a.finish(44);case 48:return a.finish(41);case 49:t.$nextTick(function(){t.isConfigLoading=!1});case 50:case"end":return a.stop()}},a,t,[[6,37,41,49],[42,,44,48]])}))()},validate:function(){return this.$refs.renderForm.validate()},getVariableData:function(){var t=l.default.deepClone(this.constants);for(var a in t){var n=t[a];if(a in this.renderData)n.value=this.renderData[a],n.meta=this.metaConfig[a];else if(n.is_meta){var s=n.source_tag.split("."),r=(0,i.default)(s,2),o=r[0],c=r[1];this.atomFormConfig[o]||(this.loadAtomConfig({atomType:o}),this.setAtomConfig({atomType:o,configData:e.atoms[o]}));var d=this.atomFormConfig[o],p=l.default.deepClone(u.default.formFilter(c,d));p=p.meta_transform(n.meta||n),n.meta=l.default.deepClone(n),n.value=p.attrs.value}}return t}})}}).call(this,a(/*! jquery */24))},525:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskParamEdit.vue?vue&type=style&index=0&id=21722bdb&lang=scss&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},526:
/*!*****************************************************************!*\
  !*** ./src/pages/task/NodePreview.vue?vue&type=script&lang=js& ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/vue-loader/lib??vue-loader-options!./NodePreview.vue?vue&type=script&lang=js& */527),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},527:
/*!***************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/NodePreview.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(/*! @/utils/i18n.js */14);var n=function(e){return e&&e.__esModule?e:{default:e}}(a(/*! @/components/common/PipelineCanvas/index.vue */535));t.default={name:"NodePreview",components:{PipelineCanvas:n.default},props:["canvasData","loading"]}},528:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/NodePreview.vue?vue&type=style&index=0&id=212b3689&lang=scss&scoped=true& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},536:
/*!******************************************!*\
  !*** ./src/pages/task/TaskParamEdit.vue ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./TaskParamEdit.vue?vue&type=template&id=21722bdb&scoped=true& */742),i=a(/*! ./TaskParamEdit.vue?vue&type=script&lang=js& */523);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./TaskParamEdit.vue?vue&type=style&index=0&id=21722bdb&lang=scss&scoped=true& */687);var r=a(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */2),o=Object(r.a)(i.default,n.a,n.b,!1,null,"21722bdb",null);o.options.__file="TaskParamEdit.vue",t.default=o.exports},678:
/*!**********************************************************************!*\
  !*** ./src/pages/task/TaskCreate/index.vue?vue&type=script&lang=js& ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=script&lang=js& */679),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},679:
/*!********************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskCreate/index.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(/*! babel-runtime/helpers/extends */131));a(/*! @/utils/i18n.js */14);var i=a(/*! vuex */42),s=c(a(/*! ../TaskStep.vue */680)),r=c(a(/*! ./TaskSelectNode.vue */831)),o=c(a(/*! ./TaskParamFill.vue */833));function c(e){return e&&e.__esModule?e:{default:e}}var u=[{step:"selectnode",name:gettext("节点选择"),component:"TaskSelectNode"},{step:"paramfill",name:gettext("参数填写"),component:"TaskParamFill"},{step:"taskexecute",name:gettext("任务执行")}];t.default={name:"TaskCreate",components:{TaskStep:s.default,TaskSelectNode:r.default,TaskParamFill:o.default},props:["template_id","cc_id","step"],data:function(){return{stepList:u,excludeNode:[],hasFunctionalStep:!1}},computed:(0,n.default)({},(0,i.mapState)({locations:function(e){return e.template.location},lines:function(e){return e.template.line},userType:function(e){return e.userType}}),{currentStep:function(){return this.step||"selectnode"},currentComponent:function(){var e=this;return this.stepList.filter(function(t){return t.step===e.currentStep})[0].component}}),watch:{hasFunctionalStep:function(e){if(e)this.appendFunctionalization();else{var t=void 0;this.stepList.some(function(e,a){if("functionalization"===e.step)return t=a,!0}),t&&this.stepList.splice(t,1)}}},mounted:function(){"functor"===this.userType&&this.setFunctionalStep(!0)},methods:{appendFunctionalization:function(){this.stepList.splice(2,0,{step:"functionalization",name:gettext("职能化认领"),component:"TaskParamFill"})},setFunctionalStep:function(e){this.hasFunctionalStep=e},setExcludeNode:function(e){this.excludeNode=e}}}},680:
/*!*************************************!*\
  !*** ./src/pages/task/TaskStep.vue ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./TaskStep.vue?vue&type=template&id=67422e92&scoped=true& */740),i=a(/*! ./TaskStep.vue?vue&type=script&lang=js& */520);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./TaskStep.vue?vue&type=style&index=0&id=67422e92&lang=scss&scoped=true& */681);var r=a(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */2),o=Object(r.a)(i.default,n.a,n.b,!1,null,"67422e92",null);o.options.__file="TaskStep.vue",t.default=o.exports},681:
/*!***********************************************************************************************!*\
  !*** ./src/pages/task/TaskStep.vue?vue&type=style&index=0&id=67422e92&lang=scss&scoped=true& ***!
  \***********************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib??vue-loader-options!./TaskStep.vue?vue&type=style&index=0&id=67422e92&lang=scss&scoped=true& */522);a.n(n).a},682:
/*!*******************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskSelectNode.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/vue-loader/lib??vue-loader-options!./TaskSelectNode.vue?vue&type=script&lang=js& */683),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},683:
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskCreate/TaskSelectNode.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(/*! babel-runtime/core-js/json/stringify */84)),i=m(a(/*! babel-runtime/regenerator */132)),s=m(a(/*! babel-runtime/helpers/asyncToGenerator */133)),r=m(a(/*! babel-runtime/core-js/object/assign */32)),o=m(a(/*! babel-runtime/helpers/extends */131));a(/*! @/utils/i18n.js */14);var c=a(/*! vuex */42),u=a(/*! @/utils/errorHandler.js */134),l=m(a(/*! @/utils/tools.js */196)),d=a(/*! @/constants/index.js */502),p=m(a(/*! @/components/common/PipelineCanvas/index.vue */535)),f=m(a(/*! @/components/common/base/BaseInput.vue */509));function m(e){return e&&e.__esModule?e:{default:e}}t.default={name:"TaskSelectNode",components:{PipelineCanvas:p.default,BaseInput:f.default},props:["cc_id","template_id","excludeNode"],data:function(){return{i18n:{schema_list:gettext("执行方案列表"),new_schema:gettext("新建方案"),all:gettext("全选"),cancel:gettext("取消全选"),next:gettext("下一步"),save:gettext("执行方案保存"),schema_name:gettext("方案名称")},loading:!0,bkMessageInstance:null,isSubmit:!1,isDelete:!1,showPanel:!0,showDialog:!1,selectedNodes:[],selectedScheme:"",schemeName:"",schemeNameRule:{required:!0,max:30,regex:d.NAME_REG}}},computed:(0,o.default)({},(0,c.mapState)({activities:function(e){return e.template.activities},locations:function(e){return e.template.location},lines:function(e){return e.template.line},constants:function(e){return e.template.constants},gateways:function(e){return e.template.gateways},taskScheme:function(e){return e.task.taskScheme},app_id:function(e){return e.app_id},viewMode:function(e){return e.view_mode}}),{canvasData:function(){var e,t={};for(var a in this.gateways){var n=this.gateways[a];n.conditions&&(t[n.id]=(0,r.default)({},n.conditions))}return e="appmaker"===this.viewMode?"selectDisabled":"select",{lines:this.lines,locations:this.locations.map(function(t){return(0,o.default)({},t,{mode:e,checked:!0})}),branchConditions:t}},isSchemeShow:function(){return this.locations.some(function(e){return e.optional})}}),mounted:function(){this.getTemplateData()},methods:(0,o.default)({},(0,c.mapActions)("template/",["loadTemplateData","saveTemplateData"]),(0,c.mapActions)("task/",["loadTaskScheme","createTaskScheme","deleteTaskScheme","getSchemeDetail"]),(0,c.mapActions)("appmaker/",["loadAppmakerDetail"]),(0,c.mapMutations)("template/",["setTemplateData"]),(0,c.mapMutations)("task/",["setTaskScheme"]),{getTemplateData:function(){var e=this;return(0,s.default)(i.default.mark(function t(){var a,n,s,r,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.loadTemplateData(e.template_id);case 4:return a=t.sent,t.next=7,e.loadTaskScheme({cc_id:e.cc_id,template_id:e.template_id});case 7:if(n=t.sent,"appmaker"!==e.viewMode){t.next=14;break}return t.next=11,e.loadAppmakerDetail(e.app_id);case 11:s=t.sent,(r=Number(s.template_scheme_id))&&e.onSelectScheme(r);case 14:e.setTaskScheme(n),e.setTemplateData(a),o=[],e.locations.forEach(function(t){"tasknode"!==t.type&&"subflow"!==t.type||-1!==e.excludeNode.indexOf(t.id)||o.push(t.id)}),e.selectedNodes=o,e.updateSelectedLocation(),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),(0,u.errorHandler)(t.t0,e);case 25:return t.prev=25,e.loading=!1,t.finish(25);case 28:case"end":return t.stop()}},t,e,[[1,22,25,28]])}))()},togglePanel:function(){this.showPanel=!this.showPanel},onShowSchemeDialog:function(){this.showDialog=!0},getExcludeNode:function(){var e=this.$refs.pipelineCanvas.$el.querySelectorAll('.node-checkbox input[type="checkbox"]'),t=[];return Array.prototype.forEach.call(e,function(e){e.checked||t.push(e.dataset.id)}),t},onConfirm:function(){var e=this;this.isSubmit||(this.taskScheme.some(function(t){return t.name===e.schemeName})?(0,u.errorHandler)({message:gettext("方案名称已存在")},this):(this.isSubmit=!0,this.$validator.validateAll().then(function(){var t=(0,s.default)(i.default.mark(function t(a){var s,r,o,c,l;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=3;break}return e.isSubmit=!1,t.abrupt("return");case 3:return e.showDialog=!1,s=e.getExcludeNode(),r=[],e.canvasData.locations.forEach(function(e){"tasknode"!==e.type&&"subflow"!==e.type||-1===s.indexOf(e.id)&&r.push(e.id)}),e.selectedNodes=r,o={cc_id:e.cc_id,template_id:e.template_id,name:e.schemeName,data:(0,n.default)(r)},t.prev=9,t.next=12,e.createTaskScheme(o);case 12:return c=t.sent,t.next=15,e.loadTaskScheme({cc_id:e.cc_id,template_id:e.template_id});case 15:l=t.sent,e.setTaskScheme(l),e.selectedScheme=c.id,e.schemeName="",e.$bkMessage({message:gettext("方案添加成功"),theme:"success"}),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(9),(0,u.errorHandler)(t.t0,e);case 25:return t.prev=25,e.isSubmit=!1,t.finish(25);case 28:case"end":return t.stop()}},t,e,[[9,22,25,28]])}));return function(e){return t.apply(this,arguments)}}())))},onCancel:function(){this.showDialog=!1,this.schemeName=""},updateSelectedLocation:function(){var e=this,t=this.$refs.pipelineCanvas;this.canvasData.locations.forEach(function(a){if("tasknode"===a.type||"subflow"===a.type){var n=e.selectedNodes.indexOf(a.id)>-1;e.$set(a,"checked",n),t&&t.onUpdateNodeInfo(a.id,a)}})},onSelectScheme:function(e){var t=this;return(0,s.default)(i.default.mark(function a(){var n;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.selectedScheme=e,a.prev=1,a.next=4,t.getSchemeDetail(e);case 4:n=a.sent,t.selectedNodes=l.default.deepClone(n.data),t.updateSelectedLocation(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),(0,u.errorHandler)(a.t0,t);case 12:case"end":return a.stop()}},a,t,[[1,9]])}))()},onDeleteScheme:function(e){var t=this;return(0,s.default)(i.default.mark(function a(){var n;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.isDelete){a.next=2;break}return a.abrupt("return");case 2:return t.isDelete=!0,a.prev=3,a.next=6,t.deleteTaskScheme(e);case 6:return a.next=8,t.loadTaskScheme({cc_id:t.cc_id,template_id:t.template_id});case 8:n=a.sent,t.setTaskScheme(n),t.$bkMessage({message:gettext("方案删除成功"),theme:"success"}),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(3),(0,u.errorHandler)(a.t0,t);case 16:return a.prev=16,t.isDelete=!1,a.finish(16);case 19:case"end":return a.stop()}},a,t,[[3,13,16,19]])}))()},onSelectAllNode:function(){var e=[];this.canvasData.locations.forEach(function(t){"tasknode"!==t.type&&"subflow"!==t.type||(t.checked=!0,e.push(t.id))}),this.selectedNodes=e,this.updateSelectedLocation()},onSelectNoneNode:function(){this.canvasData.locations.forEach(function(e){"tasknode"!==e.type&&"subflow"!==e.type||(e.checked=!1)}),this.selectedNodes=[],this.updateSelectedLocation()},onGotoParamFill:function(){var e=this.getExcludeNode();this.$emit("setExcludeNode",e),"appmaker"===this.viewMode?this.$router.push({path:"/appmaker/"+this.app_id+"/newtask/"+this.cc_id+"/paramfill/",query:{template_id:this.template_id}}):this.$router.push({path:"/template/newtask/"+this.cc_id+"/paramfill/",query:{template_id:this.template_id}})}})}},684:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskCreate/TaskSelectNode.vue?vue&type=style&index=0&id=4fdbd348&lang=scss&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},685:
/*!******************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskParamFill.vue?vue&type=script&lang=js& ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/vue-loader/lib??vue-loader-options!./TaskParamFill.vue?vue&type=script&lang=js& */686),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},686:
/*!****************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskCreate/TaskParamFill.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(a(/*! babel-runtime/core-js/json/stringify */84)),i=k(a(/*! babel-runtime/regenerator */132)),s=k(a(/*! babel-runtime/helpers/asyncToGenerator */133)),r=k(a(/*! babel-runtime/core-js/object/keys */85)),o=k(a(/*! babel-runtime/core-js/object/assign */32)),c=k(a(/*! babel-runtime/helpers/extends */131));a(/*! @/utils/i18n.js */14);var u=k(a(/*! moment */197)),l=a(/*! vuex */42),d=a(/*! @/utils/errorHandler.js */134),p=k(a(/*! @/utils/tools.js */196)),f=a(/*! @/constants/index.js */502),m=k(a(/*! @/components/common/base/NoData.vue */496)),h=k(a(/*! @/components/common/base/BaseInput.vue */509)),v=k(a(/*! ../TaskParamEdit.vue */536)),_=k(a(/*! ../NodePreview.vue */688));function k(e){return e&&e.__esModule?e:{default:e}}t.default={name:"TaskParamFill",components:{NoData:m.default,BaseInput:h.default,TaskParamEdit:v.default,NodePreview:_.default},props:["cc_id","template_id","excludeNode"],data:function(){return{i18n:{task_info:gettext("任务信息"),task_name:gettext("任务名称"),flow_type:gettext("流程类型"),default_flow_type:gettext("默认任务流程"),function_flow_type:gettext("职能化任务流程"),params_info:gettext("参数信息"),preview:gettext("预览"),previous:gettext("上一步"),new:gettext("新建"),task_preview:gettext("任务流程预览")},loading:!0,bkMessageInstance:null,previewDataLoading:!0,isSubmit:!1,isSelectFunctionalType:!1,previewDialogShow:!1,taskName:"",pipelineData:{location:[],line:[],gateways:{},constants:[]},taskNameRule:{required:!0,max:100,regex:f.NAME_REG}}},computed:(0,c.default)({},(0,l.mapState)({templateName:function(e){return e.template.name},userType:function(e){return e.userType},viewMode:function(e){return e.view_mode},run_ver:function(e){return e.run_ver},app_id:function(e){return e.app_id}}),{canvasData:function(){var e=this.pipelineData,t=(e.lines,e.locations,e.gateways),a={};for(var n in t){var i=t[n];i.conditions&&(a[i.id]=(0,o.default)({},i.conditions))}return{lines:this.pipelineData.line,locations:this.pipelineData.location.map(function(e){return(0,c.default)({},e,{mode:"preview",checked:!0})}),branchConditions:a}},isSchemeShow:function(){return this.pipelineData.location.some(function(e){return e.optional})},isTaskTypeShow:function(){return"community"!==this.run_ver&&"functor"!==this.userType},isVariableEmpty:function(){return 0===(0,r.default)(this.pipelineData.constants).length}}),mounted:function(){this.loadData()},methods:(0,c.default)({},(0,l.mapActions)("template/",["loadTemplateData"]),(0,l.mapActions)("task/",["loadPreviewNodeData","createTask"]),(0,l.mapMutations)("template/",["setTemplateData"]),{loadData:function(){var e=this;return(0,s.default)(i.default.mark(function t(){var a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.loadTemplateData(e.template_id);case 4:return a=t.sent,t.next=7,e.getPreviewNodeData();case 7:e.setTemplateData(a),e.taskName=e.getDefaultTaskName(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),(0,d.errorHandler)(t.t0,e);case 14:case"end":return t.stop()}},t,e,[[1,11]])}))()},getPreviewNodeData:function(){var e=this;return(0,s.default)(i.default.mark(function t(){var a,s,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={cc_id:e.cc_id,template_id:e.template_id,exclude_task_nodes_id:(0,n.default)(e.excludeNode)},t.prev=1,t.next=4,e.loadPreviewNodeData(a);case 4:(s=t.sent).result?(r=s.data.pipeline_tree,e.setPipelineData(r)):(0,d.errorHandler)(s,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),(0,d.errorHandler)(t.t0,e);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}},t,e,[[1,8,11,14]])}))()},setPipelineData:function(e){this.pipelineData=p.default.deepClone(e)},getDefaultTaskName:function(){return this.templateName+"_"+(0,u.default)().format("YYYYMMDDHHmmss")},onSwitchTaskType:function(e){this.isSelectFunctionalType=e,this.$emit("setFunctionalStep",e)},onShowPreviewDialog:function(){this.previewDialogShow=!0},onCancel:function(){this.previewDialogShow=!1},onGotoSelectNode:function(){this.$emit("setFunctionalStep",!1),"appmaker"===this.viewMode?this.$router.push({path:"/appmaker/"+this.app_id+"/newtask/"+this.cc_id+"/selectnode/",query:{template_id:this.template_id}}):this.$router.push({path:"/template/newtask/"+this.cc_id+"/selectnode/",query:{template_id:this.template_id}})},onCreateTask:function(){var e=this;if(!this.isSubmit){var t=this.$refs.TaskParamEdit;this.$validator.validateAll().then(function(){var a=(0,s.default)(i.default.mark(function a(s){var r,o,c,u,l,f;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=!0,o=p.default.deepClone(e.pipelineData),t&&(c=t.getVariableData(),o.constants=c,r=t.validate()),s&&r){a.next=5;break}return a.abrupt("return");case 5:return e.isSubmit=!0,u=void 0,u="functor"===e.userType?"common_func":e.isSelectFunctionalType?"common_func":"common",l={name:e.taskName,description:"",template_id:e.template_id,exec_data:(0,n.default)(o),flow_type:u},a.prev=9,a.next=12,e.createTask(l);case 12:if(f=a.sent,"appmaker"!==e.viewMode){a.next=19;break}if(!e.isSelectFunctionalType){a.next=17;break}return e.$router.push({path:"/appmaker/"+e.app_id+"/task_home/"+e.cc_id+"/"}),a.abrupt("return");case 17:return e.$router.push({path:"/appmaker/"+e.app_id+"/execute/"+e.cc_id+"/",query:{instance_id:f.instance_id}}),a.abrupt("return");case 19:e.isSelectFunctionalType?e.$router.push({path:"/taskflow/home/"+e.cc_id+"/"}):e.$router.push({path:"/taskflow/execute/"+e.cc_id+"/",query:{instance_id:f.instance_id}}),a.next=25;break;case 22:a.prev=22,a.t0=a.catch(9),(0,d.errorHandler)(a.t0,e);case 25:case"end":return a.stop()}},a,e,[[9,22]])}));return function(e){return a.apply(this,arguments)}}())}}})}},687:
/*!****************************************************************************************************!*\
  !*** ./src/pages/task/TaskParamEdit.vue?vue&type=style&index=0&id=21722bdb&lang=scss&scoped=true& ***!
  \****************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib??vue-loader-options!./TaskParamEdit.vue?vue&type=style&index=0&id=21722bdb&lang=scss&scoped=true& */525);a.n(n).a},688:
/*!****************************************!*\
  !*** ./src/pages/task/NodePreview.vue ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./NodePreview.vue?vue&type=template&id=212b3689&scoped=true& */743),i=a(/*! ./NodePreview.vue?vue&type=script&lang=js& */526);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./NodePreview.vue?vue&type=style&index=0&id=212b3689&lang=scss&scoped=true& */689);var r=a(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */2),o=Object(r.a)(i.default,n.a,n.b,!1,null,"212b3689",null);o.options.__file="NodePreview.vue",t.default=o.exports},689:
/*!**************************************************************************************************!*\
  !*** ./src/pages/task/NodePreview.vue?vue&type=style&index=0&id=212b3689&lang=scss&scoped=true& ***!
  \**************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib??vue-loader-options!./NodePreview.vue?vue&type=style&index=0&id=212b3689&lang=scss&scoped=true& */528);a.n(n).a},690:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskCreate/TaskParamFill.vue?vue&type=style&index=0&id=72f483ce&lang=scss&scoped=true& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},691:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskCreate/index.vue?vue&type=style&index=0&id=2305fb60&lang=scss&scoped=true& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},740:
/*!********************************************************************************************!*\
  !*** ./src/pages/task/TaskStep.vue?vue&type=template&id=67422e92&scoped=true& + 1 modules ***!
  \********************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-wrapper"},[a("ul",{staticClass:"step-list"},e._l(e.list,function(t,n){return a("li",{key:n,class:{"step-item":!0,finished:e.allFinished||n<e.currentStepIndex,actived:!e.allFinished&&n===e.currentStepIndex}},[e.allFinished||n<e.currentStepIndex?a("span",{staticClass:"common-icon-done-thin step-done"}):a("span",{staticClass:"order"},[e._v(e._s(n+1))]),e._v(" "),a("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),n!==e.list.length-1?a("span",{staticClass:"dot"},[e._v("......")]):e._e()])}))])},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},742:
/*!*************************************************************************************************!*\
  !*** ./src/pages/task/TaskParamEdit.vue?vue&type=template&id=21722bdb&scoped=true& + 1 modules ***!
  \*************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-param-wrapper"},[e.isConfigLoading||this.constants.length?e._e():a("RenderForm",{ref:"renderForm",attrs:{scheme:e.renderConfig,formOption:e.renderOption},model:{value:e.renderData,callback:function(t){e.renderData=t},expression:"renderData"}})],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},743:
/*!***********************************************************************************************!*\
  !*** ./src/pages/task/NodePreview.vue?vue&type=template&id=212b3689&scoped=true& + 1 modules ***!
  \***********************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:this.loading,opacity:1},expression:"{isLoading: loading, opacity: 1}"}],staticClass:"node-preview-wrapper"},[this.loading?this._e():t("PipelineCanvas",{attrs:{isMenuBarShow:!1,isConfigBarShow:!1,isEdit:!1,canvasData:this.canvasData}})],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},831:
/*!******************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskSelectNode.vue ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./TaskSelectNode.vue?vue&type=template&id=4fdbd348&scoped=true& */885),i=a(/*! ./TaskSelectNode.vue?vue&type=script&lang=js& */682);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./TaskSelectNode.vue?vue&type=style&index=0&id=4fdbd348&lang=scss&scoped=true& */832);var r=a(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */2),o=Object(r.a)(i.default,n.a,n.b,!1,null,"4fdbd348",null);o.options.__file="TaskSelectNode.vue",t.default=o.exports},832:
/*!****************************************************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskSelectNode.vue?vue&type=style&index=0&id=4fdbd348&lang=scss&scoped=true& ***!
  \****************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib??vue-loader-options!./TaskSelectNode.vue?vue&type=style&index=0&id=4fdbd348&lang=scss&scoped=true& */684);a.n(n).a},833:
/*!*****************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskParamFill.vue ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./TaskParamFill.vue?vue&type=template&id=72f483ce&scoped=true& */879),i=a(/*! ./TaskParamFill.vue?vue&type=script&lang=js& */685);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./TaskParamFill.vue?vue&type=style&index=0&id=72f483ce&lang=scss&scoped=true& */834);var r=a(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */2),o=Object(r.a)(i.default,n.a,n.b,!1,null,"72f483ce",null);o.options.__file="TaskParamFill.vue",t.default=o.exports},834:
/*!***************************************************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskParamFill.vue?vue&type=style&index=0&id=72f483ce&lang=scss&scoped=true& ***!
  \***************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib??vue-loader-options!./TaskParamFill.vue?vue&type=style&index=0&id=72f483ce&lang=scss&scoped=true& */690);a.n(n).a},835:
/*!*******************************************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/index.vue?vue&type=style&index=0&id=2305fb60&lang=scss&scoped=true& ***!
  \*******************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=style&index=0&id=2305fb60&lang=scss&scoped=true& */691);a.n(n).a},869:
/*!****************************************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/index.vue?vue&type=template&id=2305fb60&scoped=true& + 1 modules ***!
  \****************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"task-create-container":!0,"fill-height":"selectnode"===e.currentStep}},[a("TaskStep",{attrs:{list:e.stepList,currentStep:e.currentStep}}),e._v(" "),a(e.currentComponent,{ref:e.currentComponent,tag:"component",attrs:{currentStep:e.currentStep,cc_id:e.cc_id,template_id:e.template_id,excludeNode:e.excludeNode},on:{setFunctionalStep:e.setFunctionalStep,setExcludeNode:e.setExcludeNode}})],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},879:
/*!************************************************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskParamFill.vue?vue&type=template&id=72f483ce&scoped=true& + 1 modules ***!
  \************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading,opacity:1},expression:"{isLoading: loading, opacity: 1}"}],staticClass:"param-fill-wrapper"},[a("div",{staticClass:"task-info"},[a("h3",{staticClass:"common-section-title"},[e._v(e._s(e.i18n.task_info))]),e._v(" "),a("div",{staticClass:"common-form-item"},[a("label",[e._v(e._s(e.i18n.task_name))]),e._v(" "),a("div",{staticClass:"common-form-content"},[a("BaseInput",{directives:[{name:"validate",rawName:"v-validate",value:e.taskNameRule,expression:"taskNameRule"}],attrs:{name:"taskName"},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}}),e._v(" "),a("span",{staticClass:"common-error-tip error-msg"},[e._v(e._s(e.errors.first("taskName")))])],1)]),e._v(" "),e.isTaskTypeShow?a("div",{staticClass:"common-form-item"},[a("label",[e._v(e._s(e.i18n.flow_type))]),e._v(" "),a("div",{staticClass:"common-form-content"},[a("div",{staticClass:"bk-button-group"},[a("bk-button",{attrs:{type:e.isSelectFunctionalType?"default":"primary"},on:{click:function(t){e.onSwitchTaskType(!1)}}},[e._v("\n                        "+e._s(e.i18n.default_flow_type)+"\n                    ")]),e._v(" "),a("bk-button",{attrs:{type:e.isSelectFunctionalType?"primary":"default"},on:{click:function(t){e.onSwitchTaskType(!0)}}},[e._v("\n                        "+e._s(e.i18n.function_flow_type)+"\n                    ")])],1)])]):e._e()]),e._v(" "),a("div",{staticClass:"param-info"},[a("h3",{staticClass:"common-section-title"},[e._v(e._s(e.i18n.params_info))]),e._v(" "),e.loading?e._e():[e.isVariableEmpty?a("NoData"):a("TaskParamEdit",{ref:"TaskParamEdit",attrs:{constants:e.pipelineData.constants}})]],2),e._v(" "),this.loading?e._e():a("div",{staticClass:"action-wrapper"},[a("bk-button",{on:{click:e.onShowPreviewDialog}},[e._v("\n            "+e._s(e.i18n.preview)+"\n        ")]),e._v(" "),a("bk-button",{attrs:{type:"primary"},on:{click:e.onGotoSelectNode}},[e._v("\n            "+e._s(e.i18n.previous)+"\n        ")]),e._v(" "),a("bk-button",{attrs:{type:"success"},on:{click:e.onCreateTask}},[e._v(e._s(e.i18n.new))])],1),e._v(" "),e.previewDialogShow?a("bk-dialog",{attrs:{"quick-close":!1,"has-header":!0,"has-footer":!1,"ext-cls":"common-dialog",title:e.i18n.task_preview,width:"1000","is-show":e.previewDialogShow},on:{"update:isShow":function(t){e.previewDialogShow=t},cancel:e.onCancel}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("NodePreview",{attrs:{canvasData:e.canvasData,loading:e.loading}})],1)]):e._e()],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},885:
/*!*************************************************************************************************************!*\
  !*** ./src/pages/task/TaskCreate/TaskSelectNode.vue?vue&type=template&id=4fdbd348&scoped=true& + 1 modules ***!
  \*************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading,opacity:1},expression:"{isLoading: loading, opacity: 1}"}],staticClass:"select-node-wrapper"},[a("div",{staticClass:"canvas-content"},[e.isSchemeShow&&"appmaker"!==e.viewMode?a("div",{class:["node-select-scheme",{actived:e.showPanel}]},[a("div",{staticClass:"toggle-button",on:{click:e.togglePanel}},[a("i",{class:["common-icon-arrow-left",{"arrow-right":e.showPanel}]})]),e._v(" "),a("div",{staticClass:"scheme-header"},[a("h3",[e._v(e._s(e.i18n.schema_list))]),e._v(" "),a("bk-button",{staticClass:"save-scheme-btn",attrs:{type:"primary"},on:{click:e.onShowSchemeDialog}},[e._v(e._s(e.i18n.new_schema))])],1),e._v(" "),a("ul",{staticClass:"schemeList"},e._l(e.taskScheme,function(t){return a("li",{key:t.id,class:{"scheme-item":!0,selected:t.id===e.selectedScheme},on:{click:function(a){e.onSelectScheme(t.id)}}},[a("a",{staticClass:"scheme-name",attrs:{title:t.name}},[e._v(e._s(t.name))]),e._v(" "),a("i",{staticClass:"common-icon-close",on:{click:function(a){a.stopPropagation(),e.onDeleteScheme(t.id)}}})])}))]):e._e(),e._v(" "),e.isSchemeShow&&"appmaker"!==e.viewMode?a("div",{staticClass:"quick-select"},[a("bk-button",{on:{click:e.onSelectAllNode}},[e._v(e._s(e.i18n.all))]),e._v(" "),a("bk-button",{on:{click:e.onSelectNoneNode}},[e._v(e._s(e.i18n.cancel))])],1):e._e(),e._v(" "),e.loading?e._e():a("pipelineCanvas",{ref:"pipelineCanvas",attrs:{isMenuBarShow:!1,isConfigBarShow:!1,isEdit:!1,canvasData:e.canvasData}})],1),e._v(" "),a("div",{staticClass:"action-wrapper",attrs:{slot:"action-wrapper"},slot:"action-wrapper"},[a("bk-button",{attrs:{type:"primary"},on:{click:e.onGotoParamFill}},[e._v("\n            "+e._s(e.i18n.next)+"\n        ")])],1),e._v(" "),a("bk-dialog",{attrs:{"is-show":e.showDialog,"quick-close":!1,"ext-cls":"common-dialog",title:e.i18n.save,width:"600"},on:{"update:isShow":function(t){e.showDialog=t},confirm:e.onConfirm,cancel:e.onCancel}},[a("div",{attrs:{slot:"content"},slot:"content"},[e.showDialog?a("div",{staticClass:"scheme-name-wrapper"},[a("label",[e._v(e._s(e.i18n.schema_name))]),e._v(" "),a("div",{staticClass:"scheme-name-input"},[a("BaseInput",{directives:[{name:"validate",rawName:"v-validate",value:e.schemeNameRule,expression:"schemeNameRule"}],attrs:{name:"schemeName"},model:{value:e.schemeName,callback:function(t){e.schemeName=t},expression:"schemeName"}}),e._v(" "),e.errors.has("schemeName")?a("span",{staticClass:"common-error-tip error-msg"},[e._v(e._s(e.errors.first("schemeName")))]):e._e()],1)]):e._e()])])],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})}}]);
//# sourceMappingURL=13.js.map